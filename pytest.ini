[pytest]
asyncio_mode = auto
addopts = --cov --cov-report=term-missing --cov-fail-under=100 --cov-config=.coveragerc
testpaths = tests
norecursedirs = .git
pythonpath = .
# Ensure coverage starts measuring before any imports
python_files = test_*.py
python_classes = Test*
python_functions = test_*


# Test markers for categorization
markers =
    unit: Fast, isolated unit tests
    integration: Tests requiring Home Assistant fixtures
    slow: Tests that take longer to run
    vcr: Tests using VCR cassettes (record/replay)
    mqtt: Tests requiring mock MQTT broker
